# WebSocket Transfer Server ログローテーション設定
# このファイルを /etc/logrotate.d/websocket-transfer にコピーして使用

/var/log/websocket-transfer/*.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 websocket websocket
    postrotate
        systemctl reload websocket-transfer.service > /dev/null 2>&1 || true
        systemctl reload udp-receiver.service > /dev/null 2>&1 || true
    endscript
}

# systemd journal のログローテーション（追加設定）
/var/log/journal/*/websocket-transfer.service*.journal {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 systemd-journal systemd-journal
}

/var/log/journal/*/udp-receiver.service*.journal {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 systemd-journal systemd-journal
}
